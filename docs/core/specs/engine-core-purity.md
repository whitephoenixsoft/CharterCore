# ENG-CORE-PURITY — Engine Isolation & Determinism Principles  
Status: FROZEN (v1)  
Applies to: Engine Core (V1/V2+)  
Scope: Constitutional Engine Guarantees  

---

# 1. Purpose

This document defines the isolation, identity, and determinism principles of the Engine Core.

It establishes what the engine **is allowed to depend on**, and what it **must never depend on**.

This specification is constitutional.

If violated, legitimacy integrity is compromised.

---

# 2. Engine Isolation Model

## ENG-CORE-01 — Storage Agnostic

The Engine:

- Does not read from storage directly.
- Does not write to storage directly.
- Does not compute or validate file hashes.
- Does not validate persistence envelopes.
- Does not manage area lifecycle.

Persistence is the responsibility of the caller (e.g., CLI layer).

Fail if:

- Engine behavior depends on storage layout.
- Engine traverses physical persistence structures.
- Engine derives legitimacy from storage presence.

---

## ENG-CORE-02 — Logical Input Boundary

The Engine operates only on:

- Domain objects provided as input.
- Explicit references between those objects.
- Defined lifecycle state.
- Defined authority and scope rules.

The Engine must not:

- Infer missing objects.
- Traverse undeclared relationships.
- Derive meaning from object existence alone.

Fail if:

- Mere existence of an object affects legitimacy.
- Unreferenced objects influence evaluation.
- Implicit graph traversal alters outcomes.

---

# 3. Identity Doctrine

## ENG-CORE-03 — Engine-Owned Identity

All domain object identifiers:

- Must be generated by the Engine.
- Must be UUID version 7.
- Must be immutable once assigned.

External systems:

- Must not inject domain object identifiers.
- Must not override engine identity generation.

UUID timestamp components:

- Must not influence legitimacy.
- Must not determine supersession precedence.
- Must not determine restore ordering.

Fail if:

- Identity depends on storage.
- Identity depends on import source.
- Timestamp ordering affects governance outcome.

---

# 4. Immutability Principle

## ENG-CORE-04 — No In-Place Mutation

Domain objects:

- Must never be modified after creation.
- May only transition via explicit state changes defined in domain specs.
- May only evolve via supersession where defined.

History must never be rewritten.

Fail if:

- Objects are mutated in place.
- Supersession edges are altered after creation.
- State transitions occur implicitly.

---

# 5. Supersession Graph Purity

## ENG-CORE-05 — Graph-Based Legitimacy

Legitimacy evolution is defined exclusively by:

- Explicit supersession relationships.
- Explicit lifecycle state transitions.
- Explicit session acceptance.

The Engine must not:

- Infer replacement order.
- Use timestamps to determine precedence.
- Use storage ordering to resolve conflicts.

Supersession must remain:

- Explicit
- Directed
- Acyclic
- Immutable

Fail if:

- Replacement is inferred implicitly.
- Graph structure mutates after creation.

---

# 6. Determinism Guarantee

## ENG-CORE-06 — Pure Deterministic Evaluation

Given identical:

- Domain objects
- Logical references
- Session state
- Authority state
- Scope state

The Engine must produce identical outcomes.

No behavior may depend on:

- Hash algorithm
- Serialization format
- Storage order
- Import source
- Runtime environment
- System clock (beyond UUID generation)

Fail if:

- Two independent implementations produce different results from identical inputs.

---

# 7. Legitimacy Boundary

## ENG-CORE-07 — Legitimacy Is Structural

Legitimacy is created only through:

- Sessions
- Acceptance rules
- Supersession rules

Legitimacy is not created by:

- Audit events
- Storage operations
- Import actions
- Timestamps
- Actor identity

Fail if:

- Legitimacy can be inferred without session acceptance.
- Audit substitutes for governance.
- Persistence implies authority.

---

# 8. Non-Goals

The Engine is not:

- A storage engine
- A version control system
- A hash registry
- A permission system
- A distributed consensus protocol

The Engine is:

A deterministic legitimacy evaluator.

---

# 9. Mental Model

- Storage remembers.
- Audit records.
- CLI orchestrates.
- The Engine evaluates.
- Supersession evolves governance.
- Sessions create legitimacy.

The Engine is a legitimacy compiler.

---

# 10. Constitutional Status

This document defines the isolation boundary of the Engine Core.

All other specifications (ENG-DOMAIN, ENG-DECISION, ENG-REVIEW-RETIRED, ENG-SUPERSESSION, ENG-AUD) must conform to these principles.

Violation of these principles constitutes a critical constitutional failure.